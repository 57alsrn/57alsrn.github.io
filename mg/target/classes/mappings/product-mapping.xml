<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product-mapping">

<insert id="PDINSERT" parameterType="ProductVo"   >
  insert  into product(pcode, title,pname, price,quantity,shipping,img, imgtype, imgsize, rdate, userID, detail, wNum) 
  values(sqc.nextval ,#{title},#{pname}, #{price},#{quantity},#{shipping},#{img}, #{imgtype}, #{imgsize}, #{rdate}, #{userID}, #{detail},seq2.nextval ) 
</insert>

<select id="PDSELECT"  parameterType="ProductVo"  resultType="ProductVo">
   select  *  from  product
   
   where 1=1
   <if test="ch1=='title'" >
      <![CDATA[
        and  title  like '%'||#{ch2}||'%'
      ]]>
    
   </if>
   <if test="ch1=='pname'" >
       <![CDATA[
         and  pname  like '%'||#{ch2}||'%'
       ]]>
   </if>
 	order by wNum desc
</select>

<select id="DETAIL"   parameterType="ProductVo" resultType="ProductVo">
	select  *  from  product 
	
	where pcode=#{pcode}
	
</select>	

<select id="PDCONTENT"  parameterType="ProductVo"  resultType="ProductVo">
   select  *  from  product where pcode=#{pcode}
</select>

<update id="PDUPDATEFILE">
  update product 
  set title=#{title} ,pname=#{pname}, price=#{price},  quantity=#{quantity},shipping=#{shipping},
      img=#{img}, imgtype=#{imgtype}, imgsize=#{imgsize}, detail=#{detail}
  where pcode=#{pcode}  
</update>

<update id="PDUPDATE">
	update product
	set title=#{title} ,pname=#{pname}, price=#{price},   quantity=#{quantity}, shipping=#{shipping}, detail=#{detail}
	where pcode=#{pcode}
</update>

<delete id="PDDELETE"  parameterType="ProductVo" >
  delete  from  product 
  where pcode=#{pcode}
</delete>

</mapper>
